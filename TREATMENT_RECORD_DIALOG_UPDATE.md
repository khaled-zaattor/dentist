# تحديث صفحة تسجيل العلاج

## التغييرات

تم إعادة تصميم صفحة تسجيل العلاج لتكون في صفحة واحدة بدلاً من نظام الخطوات المتعددة.

## المكون الجديد

### `TreatmentRecordDialog.tsx`

مكون Dialog جديد يحتوي على جميع عناصر تسجيل العلاج في صفحة واحدة:

**المميزات:**
- اختيار العلاج والعلاج الفرعي في نفس الصفحة
- مخطط الأسنان التفاعلي (أسنان البالغين والأطفال)
- إدخال التكلفة والدفعة
- الملاحظات
- اختيار خطوات العلاج المنجزة
- كل شيء في صفحة واحدة قابلة للتمرير

**التخطيط:**
```
┌─────────────────────────────────────────┐
│ العلاج          │ العلاج الفرعي        │
├─────────────────────────────────────────┤
│ مخطط الأسنان    │ التكلفة الحقيقية    │
│ (تفاعلي)        │ مبلغ الدفعة          │
├─────────────────────────────────────────┤
│ الملاحظات                               │
├─────────────────────────────────────────┤
│ خطوات العلاج المنجزة (checkboxes)      │
├─────────────────────────────────────────┤
│ [تسجيل العلاج والخطوات]                │
└─────────────────────────────────────────┘
```

## مخطط الأسنان

### أسنان البالغين (32 سن)
- النظام العالمي FDI
- الفك العلوي: 18-11 و 21-28
- الفك السفلي: 48-41 و 31-38

### أسنان الأطفال (20 سن)
- النظام العالمي FDI
- الفك العلوي: 55-51 و 61-65
- الفك السفلي: 85-81 و 71-75

## التكامل

تم دمج المكون في صفحة المواعيد (`Appointments.tsx`):

```typescript
<TreatmentRecordDialog
  open={isRecordDialogOpen}
  onOpenChange={setIsRecordDialogOpen}
  selectedAppointment={selectedAppointment}
  treatments={treatments}
  onSubmit={(record, selectedSteps) => {
    // Handle submission
  }}
  isSubmitting={recordTreatmentMutation.isPending}
/>
```

## الملفات المعدلة

- ✅ `cavity-care-pro/src/components/TreatmentRecordDialog.tsx` - مكون جديد
- ✅ `cavity-care-pro/src/pages/Appointments.tsx` - تم التحديث لاستخدام المكون الجديد

## الملفات المحذوفة

تم إزالة المتغيرات التالية من `Appointments.tsx`:
- `recordStep` - لم تعد هناك حاجة لنظام الخطوات
- `selectedTreatment` - يتم إدارته داخل المكون
- `selectedSubTreatment` - يتم إدارته داخل المكون
- `selectedTeeth` - يتم إدارته داخل المكون
- `teethType` - يتم إدارته داخل المكون
- `actualCost` - يتم إدارته داخل المكون
- `paymentAmount` - يتم إدارته داخل المكون
- `treatmentNotes` - يتم إدارته داخل المكون
- `selectedSteps` - يتم إدارته داخل المكون

## المزايا

1. **تجربة مستخدم أفضل**: كل شيء في صفحة واحدة
2. **أسرع**: لا حاجة للتنقل بين الخطوات
3. **أسهل في الصيانة**: كود منظم في مكون منفصل
4. **قابل لإعادة الاستخدام**: يمكن استخدام المكون في أماكن أخرى

## الاستخدام

1. افتح صفحة المواعيد
2. اضغط على "تسجيل علاج" من قائمة الموعد
3. املأ جميع الحقول في صفحة واحدة
4. اضغط "تسجيل العلاج والخطوات"
